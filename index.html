<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>T7's Website</title>
    <link rel="stylesheet" href="/assets/data/styles.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/data/site.webmanifest">

    <style>
      body {
        text-align: center;
        padding: 100px 20px;
        max-width: 800px;
        user-select: none;
        overflow: hidden;
      }
      a { margin-top: 0px; }
      #login-link, #feedback-link, .current-account {
        position: fixed;
        top: 10px;
        right: 10px;
        font-size: 18px;
        margin-top: 30px;
      }
      #login-link { top: 40px; }
      #feedback-link { top: 70px; }
      .current-username { color: #3FCF8E; }
      #credits-link, #support-link, #delete-data {
        position: fixed;
        bottom: 70px;
        left: 10px;
        font-size: 18px;
        margin-top: 30px;
      }
      #support-link { bottom: 40px; }
      #delete-data {
        bottom: 10px;
        color: #dc143c;
        cursor: pointer;
      }
      #delete-data:hover {
        color: #8b0000;
        text-decoration: underline;
      }
      #splash-text {
        font-size: 18px;
        color: #ff0;
      }
      #splash-link {
        display: inline;
        margin-top: 0px;
        font-size: 18px;
      }
      #news-section {
        background-color: rgba(255, 255, 255, 0.125);
        color: #fff;
        font-family: Arial, sans-serif;
        padding: 10px 0;
        font-size: 16px;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1;
        overflow: hidden;
        white-space: nowrap;
      }
      #news-ticker {
        display: inline-block;
        padding-left: 100%;
        animation: scroll-left 10s linear infinite;
      }
      @keyframes scroll-left {
        0% { transform: translateX(0); }
        100% { transform: translateX(-100%); }
      }
      #online, #visits, #version {
        position: fixed;
        color: #555;
        font-size: 18px;
        bottom: 10px;
        right: 10px;
      }
      #online { bottom: 40px; }
      #visits { bottom: 70px; }
      #screensaver-toggle, #music-player {
        position: fixed;
        top: 10px;
        left: 10px;
        cursor: pointer;
        margin-top: 40px;
      }
      #music-player {
        top: 40px;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
      #ad {
        position: fixed;
        bottom: -300px;
        left: 50%;
        transform: translate(-50%);
        animation: spawn-ad 1s ease-in-out forwards;
        animation-delay: 1s;
        z-index: 1;
      }
      @keyframes spawn-ad {
        from { bottom: -300px; }
        to { bottom: 0; }
      }
      @keyframes despawn-ad {
        from { bottom: 0; }
        to { bottom: -300px; }
      }
      #close-ad {
        background: #dc143c;
        color: white;
        border: none;
        padding: 2px 6px;
        cursor: pointer;
        font-size: 12px;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.5;
      }
      #close-ad:hover { background: #8b0000; }
      #countdown { color: #90e090; }
      #sstm {
        position: absolute;
        bottom: -300px;
        left: 50%;
        transform: translate(-50%);
        cursor: grab;
        width: 64px;
        animation: spawn-ad 1s ease-in-out forwards;
        animation-delay: 1s;
      }
      .particles {
        font-family: monospace;
        position: fixed;
        opacity: 0;
        pointer-events: none;
        user-select: none;
        transition: opacity 1s ease;
        z-index: -1;
      }
      .spacer { height: 1000px; }
    </style>

    <script src="/assets/data/mobile.js"></script>
    <script src="/assets/data/time.js"></script>
    <script src="/assets/data/firebase-init.js"></script>
    <script src="/assets/data/sstm.js" defer></script>
    <script src="/assets/data/account.js" defer></script>
    <script src="/assets/data/delete-data.js" defer></script>
    <script src="/assets/data/music-player.js" defer></script>
    <script src="/assets/data/redirect.js" defer></script>
    <script src="/assets/data/screensaver.js" defer></script>
    <script src="/assets/data/special-text.js" type="module" defer></script>
    <script src="/assets/data/splash.js" defer></script>
    <script src="/assets/data/version.js" defer></script>
  </head>
  <body>
    <h1>Welcome to <span class="special-text">T7's Website</span>!</h1>
    <h4 style="margin-top: -10px; margin-bottom: 30px; opacity: 0.5;">also known as <span class="special-text">real-t7.github.io</span></h4>

    <img src="/assets/images/sstm-alt.png" id="sstm" draggable="false">

    <div id="splash-text">loading splash text...</div>

    <div id="news-section">
      <div id="news-ticker">loading news...</div>
    </div>

    <br>
    <input type="text" id="id-input" style="margin-top: 10px;" onkeydown="if (event.key==='Enter') redirectToKeyword();" placeholder="Enter ID">
    <button onclick="redirectToKeyword()">Go</button>

    <input type="checkbox" id="screensaver-toggle" title="Screensaver" checked>

    <audio id="background-music" src="/assets/audio/greenroom.mp3" autoplay loop preload="auto"></audio>
    <button id="music-player" data-song-title="&quot;Deltarune OST - Welcome to the Green Room&quot; by Toby Fox" title="Play Background Music"></button>

    <br>
    <p>
      A fun(<a href="/assets/data/misc/messageboxclicker.exe" download draggable="false" style="color: #eeeeee; text-decoration: none;">?</a>) ARG project created on April 28th 2025 using HTML, CSS and JavaScript.
      <br>
      <span style="color: #dc143c">WARNING</span>: this website may contain flashing lights, loud sounds and disturbing imagery.
      <br>
      <span class="special-text">Good Luck &amp; Have Fun&excl;</span>
      <br>
      <br>
      This website is in development and will frequently recieve updates.
      <br>
      Have a question? Contact me on Discord: <a href="//discordapp.com/users/878845118369636433/" draggable="false" target="_blank">@real_t7</a>
    </p>

    <div id="countdown">loading timer...</div>

    <div id="ad">
      <button id="close-ad" onclick="document.getElementById('ad').style.animation = 'despawn-ad 1s ease-in-out forwards';">✕</button>
      <a href="https://www.watching-grass-grow.com/" draggable="false" target="_blank"><img style="border: 2px solid green; width: 150px; margin-top: 20px;" draggable="false" src="https://www.watching-grass-grow.com/watching-grass-grow.gif" alt="watching grass grow" title="watching grass grow"></a>
    </div>

    <div class="current-account">welcome, <span class="current-username">stranger</span>!</div>
    <a href="/html/login/" id="login-link" draggable="false" target="_blank">→ login</a>
    <a href="/html/credits/" id="credits-link" draggable="false" target="_blank">→ credits</a>
    <a href="/html/feedback/" id="feedback-link" draggable="false" target="_blank">→ send a feedback</a>
    <a href="//www.roblox.com/games/10700225610#!/store" id="support-link" draggable="false" target="_blank">→ support me &lpar;robux&rpar;</a>
    <div id="delete-data" onclick="deleteAllData()">→ delete local data</div>
    <div id="visits">loading visits...</div>
    <div id="online">loading online users...</div>
    <div id="version">loading version...</div>

    <script>
      const t = 1346976000;

      setInterval(() => {
        let d = t - Math.floor(Date.now() / 1000);
        const s = d < 0 ? "-" : "";
        d = Math.abs(d);
        const D = Math.floor(d / 86400),
              H = Math.floor(d / 3600) % 24,
              M = Math.floor(d / 60) % 60,
              S = d % 60;
        document.getElementById("countdown").textContent = s + ` ${D}d ${H}h ${M}m ${S}s`;
      }, 1000);
      </script>

    <script>
      function deleteAllData() {
        if (confirm("are you sure you want to delete all data on this browser?")) {
          if (confirm("are you REALLY sure? this action is permanent and cannot be undone.")) {
            localStorage.clear();
            sessionStorage.clear();
            location.reload();
          }
        }
      }
    </script>

    <script>
      document.addEventListener("firebase-ready", () => {
        const dbRef = db.ref.bind(db);

        const newsTicker = document.getElementById("news-ticker");
        const onlineDiv = document.getElementById("online");
        const visitDiv = document.getElementById("visits");

        // update news ticker
        dbRef("news").on("value", snap => {
          const val = snap.val();
          newsTicker.innerHTML = val
            ? val
            : "nothing here at the moment";
        });

        // track online users
        const onlineUsersRef = dbRef("online/main");
        const myConnectionRef = dbRef(".info/connected");

        myConnectionRef.on("value", snap => {
          if (snap.val()) {
            const userRef = onlineUsersRef.push();
            userRef.set(true);
            userRef.onDisconnect().remove();
          }
        });

        // display online users
        onlineUsersRef.on("value", snap => {
          const count = snap.numChildren();
          onlineDiv.textContent = `${count} online user${count === 1 ? "" : "s"}`;
        });

        // visit system
        const hasVisited = localStorage.getItem("visited");

        if (!hasVisited) {
          dbRef("visits").transaction(
            curr => (curr || 0) + 1,
            (error, committed, snap) => {
              if (committed && snap.exists()) {
                visitDiv.textContent = `you are visitor #${snap.val()}`;
                localStorage.setItem("visited", "true");
                document.dispatchEvent(new Event("visit-ready"));
              }
            }
          );
        } else {
          dbRef("visits").once("value").then(snap => {
            if (snap.exists()) {
              visitDiv.textContent = `${snap.val()} visitor${snap.val() === 1 ? "" : "s"}`;
            } else {
              visitDiv.textContent = "no visitors yet";
            }
            document.dispatchEvent(new Event("visit-ready"));
          });
        }
      });
    </script>
    
    <script type="module">
      import { colors, brickColors } from "/assets/data/colors.js";
      function spawnParticle() {
        const particle = document.createElement("div");
        particle.className = "particles";
        particle.textContent = "■";

        particle.style.color = brickColors[Math.floor(Math.random() * brickColors.length)];
        particle.style.left = Math.random() * window.innerWidth + "px";
        particle.style.top = Math.random() * window.innerHeight + "px";
        particle.style.fontSize = (Math.random() * 24 + 16) + "px";

        document.body.appendChild(particle);

        requestAnimationFrame(() => {
          particle.getBoundingClientRect();
          particle.style.opacity = 0.3 + Math.random() * 0.3;
        });

        const angle = Math.random() * 2 * Math.PI;
        const speed = Math.random() * 0.5 + 0.2;
        let x = parseFloat(particle.style.left);
        let y = parseFloat(particle.style.top);

        const lifetime = Math.random() * 5000 + 2000;

        const moveParticle = setInterval(() => {
          x += Math.cos(angle) * speed;
          y += Math.sin(angle) * speed;
          particle.style.left = x + "px";
          particle.style.top = y + "px";
        }, 16);

        setTimeout(() => {
          particle.style.opacity = 0;
          setTimeout(() => {
            clearInterval(moveParticle);
            particle.remove();
          }, 1000);
        }, lifetime);

        nextParticle();
      }

      function nextParticle() {
        const next = Math.random() * 1500 + 500;
        setTimeout(spawnParticle, next);
      }

      nextParticle();
    </script>

    <script>
      console.log("Hello, World!");
    </script>
  </body>
</html>